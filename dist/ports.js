const copyContainer=document.getElementById("copy"),app=Elm.Main.embed(document.querySelector("div")),{ports:ports}=app,notePrefix="note-";function getEmails(){try{return JSON.parse(localStorage.getItem("emails"))}catch(e){return[]}}function storeEmails(e){try{localStorage.setItem("emails",JSON.stringify(e))}catch(e){console.log(e)}}function noteId(e=""){return`${notePrefix}${e}`}function rawNoteId(e){return e.replace(notePrefix,"")}function forNotes(e){const t=noteId();for(const o of Object.keys(localStorage))o.includes(t)&&e(o)}localStorage.getItem("emails")||storeEmails([]),ports.storeEmail.subscribe(e=>{const t=getEmails();t.push(e),storeEmails(t)}),ports.storeNote.subscribe(([e,t])=>{localStorage.setItem(noteId(e),t)}),ports.removeEmail.subscribe(e=>{storeEmails(getEmails().filter(({id:t})=>t!==e)),localStorage.removeItem(noteId(e))}),ports.removeAllEmails.subscribe(()=>{storeEmails([]),forNotes(e=>localStorage.removeItem(e))}),ports.getEmails.subscribe(()=>{ports.receiveEmails.send(getEmails())}),ports.copy.subscribe(e=>{const t=document.activeElement;copyContainer.value=e,copyContainer.select(),document.execCommand("copy"),t.focus()}),ports.getNotes.subscribe(()=>{const e=[];forNotes(t=>e.push([rawNoteId(t),localStorage.getItem(t)])),ports.receiveNotes.send(e)}),ports.storeSettings.subscribe(e=>{localStorage.setItem("settings",JSON.stringify(e))}),ports.getSettings.subscribe(()=>{const e=JSON.parse(localStorage.getItem("settings"));ports.receiveSettings.send(e)});